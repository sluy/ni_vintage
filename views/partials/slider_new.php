<?php
$slideConfig = [
  [
    'style' => "top:70%; left:60%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetyin:bottom;                     durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-170;    loopoffsety:-340;   loopduration:4000;      loopstartat:transitioninstart + 1000;  loopeasing:easeInOutQuart; looprotate:4;               loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:-4; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:15%; left:60%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetyin:top;                        durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-80;     loopoffsety:800;    loopduration:4000;      loopstartat:transitioninstart + 5000;  loopeasing:easeInOutQuart; looprotate:-10;             loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:10; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:50%; left:20%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetxin:left;                       durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:600;                         loopduration:4000;      loopstartat:transitioninstart + 9000;  loopeasing:easeInOutQuart; looprotate:-7;              loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:7; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:90%; left:50%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetyin:bottom;                     durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-50;     loopoffsety:-750;   loopduration:4000;      loopstartat:transitioninstart + 13000;  loopeasing:easeInOutQuart; looprotate:-2;               loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:2; scaleX:.5; scaleY:.5;",
  ],
  [
    'style' => "top:20%; left:25%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetxin:left;   offsetyin:top;      durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:400;     loopoffsety:750;    loopduration:4000;      loopstartat:transitioninstart + 21000;  loopeasing:easeInOutQuart; looprotate:8;                loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:-8; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:80%; left:80%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetxin:right;  offsetyin:bottom;   durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-550;    loopoffsety:-650;   loopduration:4000;      loopstartat:transitioninstart + 25000;  loopeasing:easeInOutQuart; looprotate:5;                loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:-5; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:8%;  left:80%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetxin:right;  offsetyin:top;      durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-450;    loopoffsety:950;    loopduration:4000;      loopstartat:transitioninstart + 29000;  loopeasing:easeInOutQuart; looprotate:-10;              loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:10; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:80%; left:10%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetxin:left;   offsetyin:bottom;   durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:10; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:970;     loopoffsety:-310;   loopduration:4000;      loopstartat:transitioninstart + 33000;  loopeasing:easeInOutQuart; looprotate:20;               loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:-20; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:47%; left:55%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetxin:right;                      durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-90;     loopoffsety:50;     loopduration:4000;      loopstartat:transitioninstart + 37000;  loopeasing:easeInOutQuart; looprotate:-3;              loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:3; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:70%; left:60%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetyin:bottom;                     durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-170;    loopoffsety:-340;   loopduration:4000;      loopstartat:transitioninstart + 41000;  loopeasing:easeInOutQuart; looprotate:4;               loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:-4; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:15%; left:60%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetyin:top;                        durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-80;     loopoffsety:800;    loopduration:4000;      loopstartat:transitioninstart + 45000;  loopeasing:easeInOutQuart; looprotate:-10;             loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:10; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:50%; left:20%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetxin:left;                       durationin:5500; delayin:__DELAY__;      easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:600;                         loopduration:4000;      loopstartat:transitioninstart + 49000;  loopeasing:easeInOutQuart; looprotate:-7;              loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:7; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:90%; left:50%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetyin:bottom;                     durationin:5500; delayin:__DELAY__;       easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-50;     loopoffsety:-750;   loopduration:4000;      loopstartat:transitioninstart + 53000;  loopeasing:easeInOutQuart; looprotate:-2;               loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:2; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:40%; left:94%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetxin:right;                      durationin:5500; delayin:__DELAY__;       easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-900;    loopoffsety:170;    loopduration:4000;      loopstartat:transitioninstart + 57000;  loopeasing:easeInOutQuart; looprotate:2;                loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:-2; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:20%; left:25%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetxin:left;   offsetyin:top;      durationin:5500; delayin:__DELAY__;       easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:400;     loopoffsety:750;    loopduration:4000;      loopstartat:transitioninstart + 61000;  loopeasing:easeInOutQuart; looprotate:8;                loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:-8; scaleX:.5; scaleY:.5;",
  ],
  [
    'style' => "top:80%; left:80%;filter:grayscale(100%) sepia(30%);",
    'data-ls' => "showinfo:1; offsetxin:right;  offsetyin:bottom;   durationin:5500; delayin:__DELAY__;       easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-550;    loopoffsety:-650;   loopduration:4000;      loopstartat:transitioninstart + 65000;  loopeasing:easeInOutQuart; looprotate:5;                loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:-5; scaleX:.5; scaleY:.5;",
  ],
  [
    'style' => "top:8%;  left:80%;filter:grayscale(100%) sepia(30%);",
    'data-ls'=> "showinfo:1; offsetxin:right;  offsetyin:top;      durationin:5500; delayin:__DELAY__;       easingin:easeOutQuad; fadein:false; rotatein:30; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:-450;    loopoffsety:950;    loopduration:4000;      loopstartat:transitioninstart + 69000;  loopeasing:easeInOutQuart; looprotate:-10;              loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:10; scaleX:.5; scaleY:.5;"
  ],
  [
    'style' => "top:80%; left:10%;filter:grayscale(100%) sepia(30%);",
    'data-ls'=> "showinfo:1; offsetxin:left;offsetyin:bottom;durationin:5500;easingin:easeOutQuad; fadein:false; rotatein:10; scalexin:.5; scaleyin:.5; durationout:4000; startatout:allinandloopend + 0; easingout:easeInQuint; loop:true; loopoffsetx:970;     loopoffsety:-310;   loopduration:4000;      loopstartat:transitioninstart + 73000;  loopeasing:easeInOutQuart; looprotate:20;               loopscalex:1.7; loopscaley:1.7; loopcount:1; loopfilter:grayscale(0%) sepia(0%) contrast(150%); rotation:-20; scaleX:.5; scaleY:.5;"
  ]
];

$htmlContent = [];

$counter = 0;
$delay = 0;
foreach (array_reverse($ctx['service']->posts) as $current) {
  if (!isset($slideConfig[$counter]) || $current->type === 'video') {
      continue;
  }
  if ($counter === 0) {
      $delay = 0;
  } elseif ($counter === 1) {
      $delay = 100;
  } else {
      $delay += 400;
  }
  $html = "\t"  . '<div class="ls-l post" ' .
    'style="width: '.$current->width.'px; height:'.$current->height.'px;' . $slideConfig[$counter]['style'] . '" ' .
    'data-ls="' . str_replace('__DELAY__', $delay, $slideConfig[$counter]['data-ls']) . '">' . "\n" .
    '<div class="content">' . "\n" . "\t\t" ;
  if ($current->src) {
      $html .= '<div class="picture" style="background-image: url(\''. url('compress?src=' . $current->src) .'\');background-position:'.($current->cover ? 'center center;background-size:cover;' : 'top center').';"></div>'  . "\n";
  }
  if ($current->message) {
      $html .= '<div class="message"><div class="wrapper">'.$current->message.'</div></div>'  . "\n";
  }
  if ($current->by) {
      $html .= '<div class="by">'.$current->by.'</div>'  . "\n";
  }
  $html .= '</div>' . "\n" . '</div>';
  $htmlContent[] = $html;
  $counter++;
}
echo "\n" . '<div id="slider" style="width: 1000px; height:100vh;margin:0 auto;margin-bottom: 0px;">' . "\n" .
  '<div class="ls-slide" data-ls="kenburnsscale:1.2;">' . "\n" .
  implode("\n", array_reverse($htmlContent)) .
  '</div></div>';
?>
